{% extends 'base.html'%} {% block content %}

<div id="index-banner" class="parallax-container">
  <div class="section no-pad-bot">
    <div class="container overlay">
      <h1 class="header center teal-text text-lighten-2">Welcome {{ username }}{% if username !='' %},{% endif %} to the CookBook</h1>
      <div class="row center">
        <h4 class="main header col s12 light">Recipes created for your enjoyment by passionate 'chefs' like yourself!</h4>
      </div>
      {% if username =='' %}
      <div class="row center">
        <a class="btn btn-primary btn-block waves-effect" href="{{ url_for('login') }}">Log in</a>
        <h6 class="white-text">Don't have an account? <a class="white-text" href="{{ url_for('register') }}"><i><b>Sign up here</i></b></a></h6>
      </div>
      {% endif %} {% with messages = get_flashed_messages() %} {% if messages %}
      <ul class=flashes>
        {% for message in messages %}
        <li>{{ message }}</li>
        {% endfor %}
      </ul>
      {% endif %} {% endwith %}
    </div>
  </div>
  <div class="parallax"><img src="{{url_for('static', filename='images/med-food.jpg')}}" alt="Unsplashed background img 1"></div>
</div>

<div class="row container">
  <h2 class="center">Filter the CookBook</h2>
  <form method=POST action="/recipe_filtered">
    <div class="form-group">
      <div class="row">
        <div class="input-field col m4">
          <select id="course" name="course_name">
            <option disabled selected>{{course}}</option>
            {% for course in courses %}
                <option value="{{course.course_name}}">{{course.course_name}}</option>
            {% endfor %}
          </select>
          <label>Course</label>
        </div>
        <div class="input-field col m4">
          <select id="author" name="author_name">
            <option disabled selected>{{author}}</option>
            {% for author in authors %}
                <option value="{{author.author_name}}">{{author.author_name}}</option>
            {% endfor %}
          </select>
          <label>Author</label>
        </div>
        <div class="row">
          <div class="input-field col m4">
            <label for="title_search" >Recipe Title Search:</label>
            <textarea name="title_search" id="title_search" class="materialize-textarea"></textarea>
          </div>
        </div>
        <div class="row">
          <div class=" offset-m3 col m3">
            <button type="submit" class="btn btn-primary btn-block">Filter Recipes</button>
          </div>
          <div class="col m3">
            <a href="{{ url_for('index') }}"><button class="btn btn-primary btn-block orange">Reset Filters</button></a>
          </div>
        </div>
        </div>
        </div>
  </form>

  </div>

  <div class="row container">
    {% for recipe in recipes %} {% if loop.index0 !=0 and loop.index0 % 2 == 0 %}
  </div>
  {% endif %} {% if loop.index0 == 0 or loop.index0 %2 == 0 %}
  <div class="row">
    {% endif %}
    <div class="col s12 m6">
      <div class="card hoverable">
        <div class="card-image">
          <img src="{{recipe.recipe_image_url}}" alt="recipe image"></img>
          <span id="card-image-title" class="overlay-dark card-title">{{recipe.recipe_name}}</span>
          <a class="btn-floating halfway-fab waves-effect waves-light red" href="{{url_for('display_recipe', recipe_id=recipe._id)}}"><i class="material-icons">navigate_next</i></a>
          </form>
        </div>
        <div class="card-content">
          <p>{{recipe.recipe_description | truncate(180)}}</p>
        </div>
      </div>
    </div>
    {% if loop.last %}
  </div>
  {% endif %} {% endfor %} {% endblock %}
